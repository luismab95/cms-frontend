<!-- Button -->
<button mat-icon-button [matMenuTriggerFor]="languagesMenu">
    <ng-container *ngTemplateOutlet="flagImage; context: { $implicit: getLanguage()}"></ng-container>
</button>


<!-- Language menu -->
<mat-menu [xPosition]="'before'" #languagesMenu="matMenu">
    @for (lang of languages; track $index) {
    <button mat-menu-item (click)="setActiveLang(lang.id)">
        <span class="flex items-center">
            <ng-container *ngTemplateOutlet="flagImage; context: { $implicit: lang }"></ng-container>
            <span class="ml-3">{{ lang.name }}</span>
        </span>
    </button>
    }
</mat-menu>

<!-- Flag image template -->
<ng-template let-lang #flagImage>
    <span class="relative w-6 overflow-hidden rounded-sm shadow">
        <span class="absolute inset-0 ring-1 ring-inset ring-black ring-opacity-10"></span>
        <img class="w-full" [src]="urlStatics + lang.icon" [alt]="lang.name" />
    </span>
</ng-template>